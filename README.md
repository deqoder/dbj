
# dbj: dynamic binary json

通过一个描述文件，即可解析类型不同的bin为结构不同的json


首先规定的“类型”字段的位数，若有扩容，则设置一个特殊的类型值，表示后面还有类型字段，从而实现无限种bin类型
然后每种bin类型，都描述其结构，依次描述每个字段的:
* 类型
* 位长
* 转换方式。

## 3种单一类型：
* 浮点: 浮点的位长是32位64位，转换方式参考IEEE
* 动态整数（“量程+精度”）:动态整数的位长根据量程与精度计算出，转换方式 bin值*精度+起始量程
如量程为-0.1~0.1，精度为0.02，则需要枚举的值数为(0.1 - (-0.1)) / 0.02 + 1 = 11
则可计算出位长为ceil(log(2)11) = 4
* 枚举:枚举的位长由制定者规定，转换方式也枚举出来


## 1种复合类型：数组

数组有3种：
* 定长数组: 定长即规定长度
* 有限变长数组: 有限变长即通过增加一个字段，并规定其位数，表示长度，因为规定了位数是，所以长度有限
* 无限变长数组: 无限变长，需要规定一个特殊值作为结束标志，故可以无限

数组的长度定长的规定，变长的计算出来；数组的转换方式默认不转换，也可以转换（从而实现变长整数）

## 布尔与字符串
大家可能注意到没有布尔类型，字符类型，字符串类型
都可以通过枚举，或枚举数组实现
